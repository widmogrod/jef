/*! jef 2014-07-21 */
!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):(a.jef=a.jef||{},a.jef.domdiff=b())}(this,function(){"use strict";function a(a,b){return a.nodeName===b.nodeName}function b(a,b){return 0===m(a)&&0===m(b)}function c(a,b){var c,d=[];return Array.prototype.forEach.call(a,function(a){c=a.nodeName,c&&b[c]&&d.push(c)}),d}function d(a,b){var c=[];return Array.prototype.forEach.call(a,function(a){-1===b.indexOf(a.nodeName)&&c.push(a.nodeName)}),c}function e(a,b,c){return a.attributes[c].value===b.attributes[c].value}function f(a,b){return a+'.removeAttribute("'+b+'");\n'}function g(a,b,c){return b+'.setAttribute("'+c+'", '+a+'.getAttribute("'+c+'"));\n'}function h(b,c){return b.textContent===c.textContent&&a(b,c)}function i(a,b,c){return a+"."+b+"("+c+");\n"}function j(a){return i(a.parent(),"removeChild",a)}function k(a,b){return b.parent()+".replaceChild("+a+", "+b+");\n"}function l(a,b){return i(b,"appendChild",a)}function m(a){return a.children.length}function n(a,b){return a.children[b]}function o(a,b){this.namespace=a,this.index=b||0}function p(a,b){o.call(this,a,b)}function q(a,b,h,i){var j,k,l,m="";return j=c(a.attributes,b.attributes),k=d(a.attributes,j),l=d(b.attributes,j),j.forEach(function(c){e(a,b,c)||(m+=g(i,h,c))}),k.forEach(function(a){m+=f(h,a)}),l.forEach(function(a){m+=g(i,h,a)}),m}function r(c,d){function e(c,d,f,g){var i,o,p,r,s,t="";if(r=b(c,d),s=a(c,d),s&&(t+=q(c,d,f,g)),!r&&s){for(o=m(c),p=o-m(d),f=f.next(),g=g.next(),p>0&&(o-=p),i=0;o>i;i++)t+=e(n(c,i),n(d,i),f,g),f.push(),g.push();if(p>0){do t+=j(f);while(--p>0)}else if(0>p)do t+=l(g,f.parent());while(++p<0)}else h(c,d)||(t+=k(g,f),g.pop());return t}return e(c,d,new o("aElement"),new o("bElement"))}function s(a,b,c){return new Function("aElement","bElement",c)(a,b)}o.prototype.parent=function(){return this},o.prototype.toString=function(){return this.namespace},o.prototype.pop=function(){return--this.index,this},o.prototype.push=function(){return++this.index,this},o.prototype.next=function(a){return new p(this,a)},p.prototype=Object.create(o.prototype),p.prototype.parent=function(){return this.namespace},p.prototype.toString=function(){return this.namespace+".children["+this.index+"]"};var t={};return t.diff=r,t.applyDiff=s,t.attrDifference=d,t.attrIntersection=c,t.nodeSame=a,t.nodeLeaf=b,t.nodeExactly=h,t.NamespaceString=o,t.NamespaceNext=p,t});